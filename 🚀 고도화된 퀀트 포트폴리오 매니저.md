# 🚀 고도화된 퀀트 포트폴리오 매니저

기본 포트폴리오 최적화 기능에 **사용자 정의 백테스트**와 **리밸런싱 가이드** 기능을 추가한 고도화된 버전입니다.

## 🎯 주요 기능

### 1️⃣ 자동 포트폴리오 최적화
- 선택한 종목들의 최적 비중을 자동으로 계산
- 3가지 최적화 방법 지원:
  - **Max Sharpe Ratio**: 위험 대비 수익률 최대화
  - **Min Volatility**: 변동성 최소화
  - **Equal Weight**: 동일 가중치
- 리밸런싱 주기 선택 가능 (월간/분기/연간)

### 2️⃣ 사용자 정의 포트폴리오 백테스트
- **원하는 종목과 비중을 직접 입력**하여 백테스트 수행
- 자신의 투자 전략이 얼마나 잘 작동했는지 검증
- 과거 데이터를 기반으로 성과 분석

### 3️⃣ 리밸런싱 가이드
- **현재 보유 수량을 입력**하면 목표 비중에 맞추기 위한 구체적 액션 제시
- 매수/매도 수량 및 금액 자동 계산
- 예상 거래 비용 안내
- 필요한 현금 규모 제시

## 📊 분석 지표

모든 백테스트에서 다음 지표를 제공합니다:

| 지표 | 설명 |
|------|------|
| **총 수익률** | 투자 기간 동안의 총 수익률 |
| **CAGR** | 연평균 복합 성장률 |
| **Sharpe Ratio** | 위험 대비 수익률 지표 |
| **MDD** | 최대 낙폭 (최악의 손실률) |
| **Volatility** | 연환산 변동성 |

## 📈 시각화

- **포트폴리오 가치 추이**: 시간에 따른 포트폴리오 가치 변화
- **낙폭(Drawdown) 차트**: 최대 손실 구간 시각화
- **자산 배분 파이 차트**: 포트폴리오 구성 비중
- **상관관계 히트맵**: 자산 간 상관관계 분석
- **수익률 분포 히스토그램**: 일간 수익률 분포

## 🛠️ 설치 및 실행

### 1. 가상 환경 생성
```bash
cd /home/ubuntu/quant_app
python3 -m venv venv
source venv/bin/activate
```

### 2. 필수 패키지 설치
```bash
pip install streamlit pandas plotly yfinance pypfopt numpy
```

### 3. 앱 실행
```bash
streamlit run app_advanced.py
```

### 4. 브라우저에서 접속
```
http://localhost:8501
```

## 📁 파일 구조

```
quant_app/
├── app.py                    # 기본 Streamlit 앱
├── app_advanced.py           # 고도화된 Streamlit 앱 ⭐
├── portfolio_engine.py       # 포트폴리오 최적화 엔진
├── rebalance_engine.py       # 리밸런싱 엔진
├── custom_backtest.py        # 사용자 정의 백테스트 ⭐
├── rebalancing_guide.py      # 리밸런싱 가이드 ⭐
├── README.md                 # 기본 사용 가이드
├── README_ADVANCED.md        # 고도화 버전 가이드
├── ADVANCED_GUIDE.md         # 상세 기능 설명
└── venv/                     # 가상 환경
```

## 🎓 사용 예시

### 예시 1: 자동 최적화
```
1. 자동 최적화 탭 선택
2. 티커 입력: AAPL, MSFT, GOOGL, AMZN, TSLA
3. 기간 설정: 2022-01-01 ~ 2024-01-01
4. 초기 자본: $10,000
5. 최적화 방법: Max Sharpe Ratio
6. 리밸런싱 주기: 월간
7. "분석 실행" 클릭
```

### 예시 2: 사용자 정의 백테스트
```
1. 사용자 정의 백테스트 탭 선택
2. 티커 입력: AAPL, MSFT, GOOGL
3. 비중 설정: AAPL 50%, MSFT 30%, GOOGL 20%
4. 기간 및 자본 설정
5. "백테스트 실행" 클릭
```

### 예시 3: 리밸런싱 가이드
```
1. 리밸런싱 가이드 탭 선택
2. 현재 보유 수량 입력:
   AAPL:10
   MSFT:5
   GOOGL:3
3. 목표 비중 입력:
   AAPL:50
   MSFT:30
   GOOGL:20
4. "리밸런싱 가이드 생성" 클릭
```

## ⚠️ 주의사항

1. **데이터 출처**: Yahoo Finance API 사용 (실시간이 아닐 수 있음)
2. **거래 비용**: 0.1% 기본 수수료로 계산 (실제와 다를 수 있음)
3. **과거 성과**: 백테스트 결과는 과거 성과이며 미래를 보장하지 않음
4. **세금 미포함**: 세금 및 슬리피지는 계산에 포함되지 않음
5. **투자 조언 아님**: 이 도구는 교육 목적이며 투자 조언이 아닙니다

## 🔧 커스터마이징

### 거래 비용 변경
`rebalancing_guide.py`의 `calculate_rebalancing_cost()` 함수에서:
```python
transaction_cost_pct = 0.001  # 0.1%를 원하는 값으로 변경
```

### 무위험 수익률 변경
`rebalance_engine.py`의 `calculate_metrics()` 함수에서:
```python
risk_free_rate = 0.02  # 2%를 원하는 값으로 변경
```

## 📚 추가 학습 자료

- [Efficient Frontier](https://en.wikipedia.org/wiki/Efficient_frontier)
- [Sharpe Ratio](https://en.wikipedia.org/wiki/Sharpe_ratio)
- [Portfolio Rebalancing](https://en.wikipedia.org/wiki/Rebalancing_(finance))
- [Modern Portfolio Theory](https://en.wikipedia.org/wiki/Modern_portfolio_theory)

## 🤝 기여

버그 리포트나 기능 제안은 이슈로 등록해주세요.

## 📄 라이선스

MIT License

## 📞 지원

문제가 발생하면 다음을 확인하세요:
1. 인터넷 연결 상태
2. 티커 정확성 (예: AAPL, MSFT)
3. 입력 형식 (예: 비중 합계가 100%인지)
4. 패키지 버전 (pip list로 확인)

---

**마지막 업데이트**: 2024년 12월

**버전**: 2.0 (Advanced Edition)
